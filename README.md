# LYDQN
现网需要通过多个阶段演进到目标网，现已将两个网待演进区域划分到不同社团，求每阶段选择哪个/哪些社团，以尽可能缩短工期、提高投资回报率。此算法利用dueling dqn解决目标承载网多阶段演进中的社团次序选择问题。
## 问题背景：
网络架构的演进通常受流量增长的驱动：现网由于无法承载未来预期激增的流量需要进行升级改造，因此优先演进网络流量增长较快、确定性较高的区域，所得的长期收益会更高。然而在具体工程实施中，用户常受到每年预算有限等资源、经济的限制，网络只能在流量增长的驱动和预算的约束下被动演进。如下图所示。
![image](https://user-images.githubusercontent.com/53416615/153701952-25d9ec5f-0218-478e-a9b3-5e4489b1dbc6.png)
1. 每阶段的社团选择受到投资金额的限制。设每阶段的投资金额只能用于本阶段的社团改造，分四个阶段拨给[50,20,30,30]；社团1到5的改造成本分别为[5,24,26,26,26]。若在第一阶段选择了社团1，那么后续阶段其他剩余社团会因投资金额小于改造成本导致整网演进失败，因此第一阶段需要选择(2,3),(2,4)或(2,5)的社团组合；
2.  每阶段的社团选择受到流量预测与承载的影响。设社团1到5初始流量需求分别为[10,20,20,20,20]，每阶段流量分别按照[1.3,1.2,1.2,1.2,1.1]的速率增长；社团在现网中的承载能力分别为[20,25,30,30,30]，在目标网络中的承载能力分别为[30,45,50,50,50]。由于实际承载的流量不能超过网络的承载能力，对于社团5而言，即使是四个阶段以后其流量需求也才为20×1.1×1.1×1.1×1.1=29.282小于现网的承载能力30，因此可以将其放到第四阶段进行演进。总体而言，每一阶段会优先选择能使未来实际承载流量更大的社团组，基于遍历求解可得在该例子下的最优社团演进次序为[[2,4],[1],[3],[5]]或[[2,3],[1],[4],[5]]。
## Requirements
The example runs in python3.6:
* torch: 1.6.0+cpu
* numpy: 1.18.5
* networkx: 2.5
## Datasets
所有网络拓扑均为无向加权图。
* Net1：
  * 现网：33节点，39边，5社团；
  * 目标网：33节点，56边，5社团；
* Net2（IP骨干网）:
  * 现网：643节点，1195边，7社团；
  * 目标网：648节点，1407边，7社团；
* Net3（IP骨干网）:
  * 现网：274节点，476边，10社团；
  * 目标网：276节点，545边，10社团。
## Usage
1. `env.py`: 网络演进环境模块；
2. `main.py`: 强化学习主训练算法；
3. `d3qn.py`: 强化学习用于动作选择与动作评估的神经网络模型；
4. `benchmark_greedy`:贪心算法对比算法；
5. `benchmark_best`：动态规划求解的最优对比算法。
